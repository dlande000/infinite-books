(this["webpackJsonpinfinite-books"]=this["webpackJsonpinfinite-books"]||[]).push([[0],{20:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),i=n(14),r=n.n(i),a=(n(20),n(15)),o=n(3),l=n(0),d=function(e,t){return e?0===e.length?"".concat(t[0].toUpperCase()+t.slice(1),": ").concat(e[0]):e.length>3?"".concat(t[0].toUpperCase()+t.slice(1),"s: ").concat(e.slice(0,3).join(", "),", and ").concat(e.length-3," more"):"".concat(t[0].toUpperCase()+t.slice(1),"s: ").concat(e.join(", ")):"No ".concat(t," provided.")},j=function(e){var t=e.title,n=e.author_name,c=e.publisher,s=e.isbn,i=d(n,"author"),r=d(c,"publisher"),a=d(s,"ISBN");return Object(l.jsxs)("div",{className:"box search-result",children:[s&&Object(l.jsx)("img",{className:"photo",alt:"".concat(t," cover"),src:"http://covers.openlibrary.org/b/isbn/".concat(s[0],"-M.jpg")}),Object(l.jsxs)("div",{className:"book-info",children:[Object(l.jsx)("div",{id:"title",children:t}),Object(l.jsx)("div",{children:i}),Object(l.jsx)("div",{children:r}),Object(l.jsx)("div",{children:a})]})]})},b=n(4),h=n.n(b),u=function(e,t){var n=Object(c.useState)([]),s=Object(o.a)(n,2),i=s[0],r=s[1],a=Object(c.useState)(!0),l=Object(o.a)(a,2),d=l[0],j=l[1],b=Object(c.useState)(!1),u=Object(o.a)(b,2),O=u[0],f=u[1],x=Object(c.useState)(!1),p=Object(o.a)(x,2),v=p[0],g=p[1];return Object(c.useEffect)((function(){var n;return j(!0),v&&g(!1),h()({method:"GET",url:"https://openlibrary.org/search.json",params:{q:e,page:t},cancelToken:new h.a.CancelToken((function(e){return n=e}))}).then((function(e){var t=e.data.docs;r((function(e){return e.concat(t)})),f(t.length>0),j(!1)})).catch((function(e){h.a.isCancel(e)||g(!0)})),function(){return n()}}),[e,t]),Object(c.useEffect)((function(){return r([])}),[e]),{books:i,isLoading:d,hasMoreResults:O,hasError:v}},O=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(1),r=Object(o.a)(i,2),d=r[0],b=r[1],h=Object(c.useRef)(),O=u(n,d),f=O.books,x=O.isLoading,p=O.hasMoreResults,v=O.hasError,g=Object(c.useCallback)((function(e){x||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&p&&b((function(e){return++e}))})),e&&h.current.observe(e))}),[x,p]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"text",value:n,onChange:function(e){e.preventDefault(),s(e.target.value),b(1)},placeholder:"Ex: Macbeth, Toni Morrison, etc."}),Object(l.jsx)("div",{id:"results-container",children:f.map((function(e,t){return Object(l.jsx)("div",{ref:t===f.length-1?g:null,children:Object(l.jsx)(j,Object(a.a)({},e))},e.title+t)}))}),x&&Object(l.jsx)("div",{className:"box message",id:"loading",children:"Loading . . ."}),v&&Object(l.jsx)("div",{className:"box message",id:"error",children:"An error has occurred. Please refresh and try again."}),n&&!x&&!p&&Boolean(f.length)&&Object(l.jsxs)("div",{className:"box message",id:"no-results",children:[Object(l.jsx)("div",{children:"That's everything for:"}),Object(l.jsx)("div",{id:"query",children:n}),Object(l.jsxs)("div",{children:["Happy reading! ",":)"]})]}),!n&&!x&&Object(l.jsx)("div",{className:"box message",id:"loading",children:"Use the search bar to find infinite books."}),n&&!x&&!f.length&&Object(l.jsxs)("div",{className:"box message",id:"error",children:[Object(l.jsx)("div",{children:"No results for:"}),Object(l.jsx)("div",{id:"query",children:n})]})]})},f=function(){return Object(l.jsxs)("div",{id:"app",children:[Object(l.jsx)("h1",{children:"infinite books."}),Object(l.jsx)("div",{children:"So much to read, so little time."}),Object(l.jsx)("br",{}),Object(l.jsxs)("div",{className:"small-text",children:["Need an infinite list of reading material? Infinite Books uses the ",Object(l.jsx)("a",{href:"https://openlibrary.org/developers/api",children:"Open Library API"})," to return as many books as can be found. Infinite Books was built by David Anderson to experiment with React Hooks, an infinite scroll, and Anime.js. The repo for this page can be found ",Object(l.jsx)("a",{href:"https://github.com/dlande000/infinite-books",children:"here"}),"."]}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"small-text",children:"Happy infinite reading!"}),Object(l.jsx)("br",{}),Object(l.jsx)(O,{})]})};r.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(f,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ef6af81a.chunk.js.map